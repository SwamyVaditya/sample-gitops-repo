apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Define the Helm chart as a Kustomize resource
helmCharts:
- name: ingress-nginx
  repo: https://kubernetes.github.io/ingress-nginx
  version: 4.13.3             # ðŸ‘ˆ **Pin the specific, stable version**
  releaseName: ingress-nginx
  namespace: ingress-nginx   # ðŸ‘ˆ Specify the namespace where it will be installed
  
  # Custom values passed to the Helm chart
  valuesInline:
    controller:
      # Use an internal-only type for a shared cluster, or adjust as needed
      service:
        type: LoadBalancer 
        externalTrafficPolicy: Local
      
      # *** REDUCED RESOURCE LIMITS FOR LOCAL MACHINE ***
      resources:
        limits:
          cpu: 100m             
          memory: 128Mi          
        requests:
          cpu: 50m               
          memory: 64Mi

      # Example: Define resource limits for stability
      #resources:
      #  limits:
      #    cpu: 500m
      #    memory: 512Mi
      #  requests:
      #    cpu: 250m
      #    memory: 256Mi 