apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namePrefix: dev-
namespace: dev
resources:
  - ../../base/
patches:
  - path: patch-deployment.yaml
    target:
      kind: Deployment
      name: sample-app
  # Strategic merge patch to ensure local ingress.yaml overrides base
  - path: patch-ingress.yaml
    target:
      kind: Ingress
      name: sample-app-ingress
images:
  - name: ghcr.io/swamyvaditya/sample-gitops-repo/sample-app
    newTag: "13fb789"
